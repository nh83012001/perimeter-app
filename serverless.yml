service: perimeter-frontend

provider:
  name: aws
  profile: dish

plugins:
  - serverless-spa-deploy
  - serverless-spa-config

custom:
  spa:
    files:
      - source: ./dist
        globs: '**/*'
        headers:
          CacheControl: max-age=300
      - source: ./dist
        globs: 'index.html'
        headers:
          CacheControl: max-age=300 # 5 minutes
  accounts:
    dev:
      debug: '*'
      profile: dish

resources:
  Resources:
    WebsiteBucket:
      Type: AWS::S3::Bucket
      Properties:
        WebsiteConfiguration:
          IndexDocument: index.html
          ErrorDocument: index.html

  Outputs:
    WebsiteBucketName:
      Value:
        Ref: WebsiteBucket
    WebsiteURL:
      Value:
        Fn::GetAtt: [WebsiteBucket, WebsiteURL]
